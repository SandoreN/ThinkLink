{"ast":null,"code":"import _regeneratorRuntime from \"/home/jescobar/Spring2024/SoftDD/ThinkLink/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/jescobar/Spring2024/SoftDD/ThinkLink/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport api from '@/services/api';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    user: null,\n    token: localStorage.getItem('token')\n  },\n  mutations: {\n    setUser: function setUser(state, user) {\n      state.user = user;\n    },\n    setToken: function setToken(state, token) {\n      state.token = token;\n    }\n  },\n  actions: {\n    login: function login(_ref, credentials) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var commit, response, token, user;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref.commit;\n              _context.prev = 1;\n              _context.next = 4;\n              return api.post('/login', credentials);\n            case 4:\n              response = _context.sent;\n              token = response.data.token;\n              localStorage.setItem('token', token);\n              commit('setToken', token);\n              _context.next = 10;\n              return api.get('/protected');\n            case 10:\n              user = _context.sent;\n              commit('setUser', user.data.user);\n              _context.next = 16;\n              break;\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](1);\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[1, 14]]);\n      }))();\n    },\n    register: function register(_, userData) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return api.post('/register', userData);\n            case 3:\n              _context2.next = 7;\n              break;\n            case 5:\n              _context2.prev = 5;\n              _context2.t0 = _context2[\"catch\"](0);\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 5]]);\n      }))();\n    },\n    logout: function logout(_ref2) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var commit;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              commit = _ref2.commit;\n              _context3.prev = 1;\n              _context3.next = 4;\n              return api.post('/logout');\n            case 4:\n              localStorage.removeItem('token');\n              commit('setToken', null);\n              commit('setUser', null);\n              _context3.next = 11;\n              break;\n            case 9:\n              _context3.prev = 9;\n              _context3.t0 = _context3[\"catch\"](1);\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[1, 9]]);\n      }))();\n    }\n  },\n  getters: {\n    isAuthenticated: function isAuthenticated(state) {\n      return !!state.token;\n    },\n    currentUser: function currentUser(state) {\n      return state.user;\n    }\n  }\n});","map":{"version":3,"names":["Vue","Vuex","api","use","Store","state","user","token","localStorage","getItem","mutations","setUser","setToken","actions","login","_ref","credentials","_asyncToGenerator","_regeneratorRuntime","mark","_callee","commit","response","wrap","_callee$","_context","prev","next","post","sent","data","setItem","get","t0","stop","register","_","userData","_callee2","_callee2$","_context2","logout","_ref2","_callee3","_callee3$","_context3","removeItem","getters","isAuthenticated","currentUser"],"sources":["/home/jescobar/Spring2024/SoftDD/ThinkLink/client/src/store/index.js"],"sourcesContent":["import Vue from 'vue';\nimport Vuex from 'vuex';\nimport api from '@/services/api';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {\n    user: null,\n    token: localStorage.getItem('token')\n  },\n  mutations: {\n    setUser(state, user) {\n      state.user = user;\n    },\n    setToken(state, token) {\n      state.token = token;\n    }\n  },\n  actions: {\n    async login({ commit }, credentials) {\n      try {\n        const response = await api.post('/login', credentials);\n        const token = response.data.token;\n        localStorage.setItem('token', token);\n        commit('setToken', token);\n        const user = await api.get('/protected');\n        commit('setUser', user.data.user);\n      } catch (error) {\n        // Handle login error\n      }\n    },\n    async register(_, userData) {\n      try {\n        await api.post('/register', userData);\n        // Handle successful registration\n      } catch (error) {\n        // Handle registration error\n      }\n    },\n    async logout({ commit }) {\n      try {\n        await api.post('/logout');\n        localStorage.removeItem('token');\n        commit('setToken', null);\n        commit('setUser', null);\n      } catch (error) {\n        // Handle logout error\n      }\n    }\n  },\n  getters: {\n    isAuthenticated(state) {\n      return !!state.token;\n    },\n    currentUser(state) {\n      return state.user;\n    }\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}