{"ast":null,"code":"import _regeneratorRuntime from \"/home/user/School/CSC330/ThinkLink/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/user/School/CSC330/ThinkLink/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.json.stringify.js\";\n/*\nimport savebuttoncontainer from '. ./components/savebuttoncontainer'\nimport { ref, computed, watch } from 'vue';\nimport MarkdownIt from 'markdown-it';\nimport { jsPDF } from 'jspdf';\nimport axios from 'axios';\n*/\n//import 'quill/dist/quill.snow.css'; // for snow theme\nimport { quillEditor } from 'vue3-quill';\nimport savebuttoncontainer from '../components/savebuttoncontainer';\nimport { ref, onMounted, watch } from 'vue';\nimport { jsPDF } from 'jspdf';\nimport axios from 'axios';\nexport default {\n  name: 'Drafts',\n  components: {\n    savebuttoncontainer: savebuttoncontainer,\n    quillEditor: quillEditor\n  },\n  props: {\n    project_id: {\n      type: String,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      draftName: draftName,\n      quill: quill,\n      project_id: project_id,\n      save: save,\n      updateMarkdown: updateMarkdown\n    };\n  },\n  setup: function setup(props) {\n    var _arguments = arguments;\n    var draftName = ref('');\n    var editorContent = ref('');\n    //const md = new MarkdownIt();\n    var project_id = ref(props.project_id);\n    var quill = ref(null);\n    var quillInstance = ref(null);\n    var onEditorReady = function onEditorReady(editor, quill) {\n      console.log('onEditorReady arguments:', _arguments); // Log the arguments\n\n      quillInstance.value = quill; // Access the Quill editor instance\n    };\n    var updateMarkdown = function updateMarkdown(_ref) {\n      var quill = _ref.quill;\n      editorContent.value = quill.root.innerHTML;\n      console.log('Content changed:', editorContent.value);\n    };\n    var save = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var content, doc, pdf, formData, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              console.log('Quill instance:', quillInstance.value); // Log the Quill instance\n              content = '';\n              if (quillInstance.value) {\n                content = JSON.stringify(quillInstance.value.getContents());\n              }\n              console.log('Quill editor content:', content);\n              doc = new jsPDF();\n              _context.next = 7;\n              return doc.html(content, {\n                // Wait for the HTML to be rendered\n                x: 10,\n                y: 10\n              });\n            case 7:\n              pdf = doc.output('blob');\n              console.log('Draft name:', draftName.value);\n              _context.prev = 9;\n              formData = new FormData();\n              formData.append('action', 'create_draft');\n              formData.append('file', pdf, \"\".concat(draftName.value, \".pdf\"));\n              formData.append('file_data', JSON.stringify({\n                content: content,\n                filename: \"\".concat(draftName.value, \".pdf\")\n              }));\n              _context.next = 16;\n              return axios.post(\"\".concat(process.env.VUE_APP_FLASK_APP_URL, \"/project_workspace/\").concat(props.project_id), formData, {\n                headers: {\n                  'Content-Type': 'multipart/form-data'\n                }\n              });\n            case 16:\n              response = _context.sent;\n              if (response.status === 200) {\n                console.log('Draft saved successfully');\n              } else {\n                console.log('Failed to save draft');\n              }\n              _context.next = 23;\n              break;\n            case 20:\n              _context.prev = 20;\n              _context.t0 = _context[\"catch\"](9);\n              console.error(_context.t0);\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[9, 20]]);\n      }));\n      return function save() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  }\n};","map":{"version":3,"names":["quillEditor","savebuttoncontainer","ref","onMounted","watch","jsPDF","axios","name","components","props","project_id","type","String","required","data","draftName","quill","save","updateMarkdown","setup","_arguments","arguments","editorContent","quillInstance","onEditorReady","editor","console","log","value","_ref","root","innerHTML","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","content","doc","pdf","formData","response","wrap","_callee$","_context","prev","next","JSON","stringify","getContents","html","x","y","output","FormData","append","concat","filename","post","process","env","VUE_APP_FLASK_APP_URL","headers","sent","status","t0","error","stop","apply"],"sources":["/home/user/School/CSC330/ThinkLink/client/src/components/drafts.vue"],"sourcesContent":["/<!--\n<template>\n    <input class=\"draft-name-input\" v-model=\"draftName\" placeholder=\"Enter draft name\" />\n    <div v-html=\"compiledMarkdown\" class=\"markdown-preview\"></div>\n    <textarea id=\"markdown-editor\" v-model=\"markdown\"></textarea>\n    <savebuttoncontainer class=\"save-button\" @click=\"save\"></savebuttoncontainer>\n</template>\n-->\n<template>\n    <input class=\"draft-name-input\" v-model=\"draftName\" placeholder=\"Enter draft name\" />\n    <!--<div v-html=\"compiledMarkdown \" class=\"markdown-preview\"></div>-->\n    <quill-editor @ready=\"onEditorReady\" ref=\"quill\" id=\"quill-editor\" editorContent=\"quill\" @contentChange=\"updateMarkdown\"></quill-editor>\n    <savebuttoncontainer class=\"save-button\" @click=\"save\"></savebuttoncontainer>\n</template>\n\n<script>\n/*\nimport savebuttoncontainer from '. ./components/savebuttoncontainer'\nimport { ref, computed, watch } from 'vue';\nimport MarkdownIt from 'markdown-it';\nimport { jsPDF } from 'jspdf';\nimport axios from 'axios';\n*/\n//import 'quill/dist/quill.snow.css'; // for snow theme\nimport { quillEditor } from 'vue3-quill';\nimport savebuttoncontainer from '../components/savebuttoncontainer';\nimport { ref, onMounted, watch } from 'vue';\nimport { jsPDF } from 'jspdf';\nimport axios from 'axios';\n\nexport default {\n    name: 'Drafts',\n    components: {\n        savebuttoncontainer,\n        quillEditor\n    },\n    props: {\n        project_id: {\n            type: String,\n            required: true,\n        },\n    },\n    data() {\n        return {\n            draftName,\n            quill,\n            project_id,\n            save,\n            updateMarkdown\n        };\n    },\n    \n    setup(props) {\n\n        const draftName = ref('');\n        const editorContent = ref('');\n        //const md = new MarkdownIt();\n        const project_id = ref(props.project_id);\n        const quill = ref(null);\n        const quillInstance = ref(null);\n\n        const onEditorReady = (editor, quill) => {\n            console.log('onEditorReady arguments:', arguments); // Log the arguments\n\n            quillInstance.value = quill; // Access the Quill editor instance\n        };\n\n        const updateMarkdown = ({ quill }) => {\n            editorContent.value = quill.root.innerHTML;\n            console.log('Content changed:', editorContent.value);\n        };\n\n        const save = async () => {\n            console.log('Quill instance:', quillInstance.value); // Log the Quill instance\n\n            let content = '';\n            if (quillInstance.value) {\n                content = JSON.stringify(quillInstance.value.getContents());\n            } \n            console.log('Quill editor content:', content);\n            const doc = new jsPDF();\n            await doc.html(content, { // Wait for the HTML to be rendered\n                x: 10,\n                y: 10\n            });\n\n            const pdf = doc.output('blob');\n            console.log('Draft name:', draftName.value);\n\n\n            try {\n                const formData = new FormData();\n                formData.append('action', 'create_draft');\n                formData.append('file', pdf, `${draftName.value}.pdf`);\n                formData.append('file_data', JSON.stringify({\n                    content: content,\n                    filename: `${draftName.value}.pdf`\n                }));\n\n                const response = await axios.post(`${process.env.VUE_APP_FLASK_APP_URL}/project_workspace/${props.project_id}`, formData, {\n                    headers: {\n                        'Content-Type': 'multipart/form-data'\n                    }\n                });\n\n                if (response.status === 200) {\n                    console.log('Draft saved successfully');\n                } else {\n                    console.log('Failed to save draft');\n                }\n            } catch (error) {\n                console.error(error);\n            }\n        };\n    },\n};\n</script>\n\n<style scoped>\n.projectworkspace-pagemain {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-items: center;\n  justify-content: center;\n  padding-top: 30px;\n  max-width: 100%;\n  height: 100%;\n  position: relative;\n  flex-grow: 1;\n}\n\n#quill-editor {\n  display: flex;\n  width: 500px;\n  height: 450px;\n  border: 1px solid black;\n}\n\n.draft-name-input {\n  height: 55px;\n  padding: 10px;\n  font-size: 30px;\n  margin-bottom: 20px;\n  border: 2px solid black;\n  border-radius: 4px;\n  align-items: center;\n  justify-content: center;\n}\n/*\n.markdown-preview {\n  margin-top: 10px;\n  margin-bottom: 10px;\n  overflow-y: auto;\n  height: 200px;\n  width: 500px;\n  border: 1px solid black;\n}\n*/\n.save-button {\n  align-self: center;\n}\n</style>\n<!--\n/*\nconst compiledMarkdown = computed(() => {\n    return md.render(markdown.value);\n});\n\nconst save = async () => {\n    const doc = new jsPDF();\n    doc.text(markdown.value, 10, 10);\n    const pdf = doc.output('blob');\n\n    try {\n        const formData = new FormData();\n        formData.append('action', 'create_draft');\n        formData.append('file', pdf, `${draftName.value}.pdf`);\n        formData.append('file_data', JSON.stringify({\n            content: markdown.value,\n            filename: `${draftName.value}.pdf`\n        }));\n        console.log('formData:', formData);\n\n        const response = await axios.post(`${process.env.VUE_APP_FLASK_APP_URL}/project_workspace/${props.project_id}`, formData, {\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        });\n\n        if (response.status === 200) {\n            console.log('Draft saved successfully');\n        } else {\n            console.log('Failed to save draft');\n        }\n    } catch (error) {\n        console.error('An error occurred while saving the draft:', error);\n    }\n};\n-->"],"mappings":";;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,WAAU,QAAS,YAAY;AACxC,OAAOC,mBAAkB,MAAO,mCAAmC;AACnE,SAASC,GAAG,EAAEC,SAAS,EAAEC,KAAI,QAAS,KAAK;AAC3C,SAASC,KAAI,QAAS,OAAO;AAC7B,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACXC,IAAI,EAAE,QAAQ;EACdC,UAAU,EAAE;IACRP,mBAAmB,EAAnBA,mBAAmB;IACnBD,WAAU,EAAVA;EACJ,CAAC;EACDS,KAAK,EAAE;IACHC,UAAU,EAAE;MACRC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACd;EACJ,CAAC;EACDC,IAAI,WAAAA,KAAA,EAAG;IACH,OAAO;MACHC,SAAS,EAATA,SAAS;MACTC,KAAK,EAALA,KAAK;MACLN,UAAU,EAAVA,UAAU;MACVO,IAAI,EAAJA,IAAI;MACJC,cAAa,EAAbA;IACJ,CAAC;EACL,CAAC;EAEDC,KAAK,WAAAA,MAACV,KAAK,EAAE;IAAA,IAAAW,UAAA,GAAAC,SAAA;IAET,IAAMN,SAAQ,GAAIb,GAAG,CAAC,EAAE,CAAC;IACzB,IAAMoB,aAAY,GAAIpB,GAAG,CAAC,EAAE,CAAC;IAC7B;IACA,IAAMQ,UAAS,GAAIR,GAAG,CAACO,KAAK,CAACC,UAAU,CAAC;IACxC,IAAMM,KAAI,GAAId,GAAG,CAAC,IAAI,CAAC;IACvB,IAAMqB,aAAY,GAAIrB,GAAG,CAAC,IAAI,CAAC;IAE/B,IAAMsB,aAAY,GAAI,SAAhBA,aAAYA,CAAKC,MAAM,EAAET,KAAK,EAAK;MACrCU,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEN,UAAS,CAAC,EAAE;;MAEpDE,aAAa,CAACK,KAAI,GAAIZ,KAAK,EAAE;IACjC,CAAC;IAED,IAAME,cAAa,GAAI,SAAjBA,cAAaA,CAAAW,IAAA,EAAmB;MAAA,IAAZb,KAAI,GAAAa,IAAA,CAAJb,KAAI;MAC1BM,aAAa,CAACM,KAAI,GAAIZ,KAAK,CAACc,IAAI,CAACC,SAAS;MAC1CL,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEL,aAAa,CAACM,KAAK,CAAC;IACxD,CAAC;IAED,IAAMX,IAAG;MAAA,IAAAe,KAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAI,SAAAC,QAAA;QAAA,IAAAC,OAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,QAAA,EAAAC,QAAA;QAAA,OAAAP,mBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACTpB,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEJ,aAAa,CAACK,KAAK,CAAC,EAAE;cAEjDS,OAAM,GAAI,EAAE;cAChB,IAAId,aAAa,CAACK,KAAK,EAAE;gBACrBS,OAAM,GAAIU,IAAI,CAACC,SAAS,CAACzB,aAAa,CAACK,KAAK,CAACqB,WAAW,CAAC,CAAC,CAAC;cAC/D;cACAvB,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEU,OAAO,CAAC;cACvCC,GAAE,GAAI,IAAIjC,KAAK,CAAC,CAAC;cAAAuC,QAAA,CAAAE,IAAA;cAAA,OACjBR,GAAG,CAACY,IAAI,CAACb,OAAO,EAAE;gBAAE;gBACtBc,CAAC,EAAE,EAAE;gBACLC,CAAC,EAAE;cACP,CAAC,CAAC;YAAA;cAEIb,GAAE,GAAID,GAAG,CAACe,MAAM,CAAC,MAAM,CAAC;cAC9B3B,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEZ,SAAS,CAACa,KAAK,CAAC;cAAAgB,QAAA,CAAAC,IAAA;cAIjCL,QAAO,GAAI,IAAIc,QAAQ,CAAC,CAAC;cAC/Bd,QAAQ,CAACe,MAAM,CAAC,QAAQ,EAAE,cAAc,CAAC;cACzCf,QAAQ,CAACe,MAAM,CAAC,MAAM,EAAEhB,GAAG,KAAAiB,MAAA,CAAKzC,SAAS,CAACa,KAAK,SAAM,CAAC;cACtDY,QAAQ,CAACe,MAAM,CAAC,WAAW,EAAER,IAAI,CAACC,SAAS,CAAC;gBACxCX,OAAO,EAAEA,OAAO;gBAChBoB,QAAQ,KAAAD,MAAA,CAAKzC,SAAS,CAACa,KAAK;cAChC,CAAC,CAAC,CAAC;cAAAgB,QAAA,CAAAE,IAAA;cAAA,OAEoBxC,KAAK,CAACoD,IAAI,IAAAF,MAAA,CAAIG,OAAO,CAACC,GAAG,CAACC,qBAAqB,yBAAAL,MAAA,CAAsB/C,KAAK,CAACC,UAAU,GAAI8B,QAAQ,EAAE;gBACtHsB,OAAO,EAAE;kBACL,cAAc,EAAE;gBACpB;cACJ,CAAC,CAAC;YAAA;cAJIrB,QAAO,GAAAG,QAAA,CAAAmB,IAAA;cAMb,IAAItB,QAAQ,CAACuB,MAAK,KAAM,GAAG,EAAE;gBACzBtC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;cAC3C,OAAO;gBACHD,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;cACvC;cAAAiB,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAqB,EAAA,GAAArB,QAAA;cAEAlB,OAAO,CAACwC,KAAK,CAAAtB,QAAA,CAAAqB,EAAM,CAAC;YAAA;YAAA;cAAA,OAAArB,QAAA,CAAAuB,IAAA;UAAA;QAAA,GAAA/B,OAAA;MAAA,CAE3B;MAAA,gBAzCKnB,IAAGA,CAAA;QAAA,OAAAe,KAAA,CAAAoC,KAAA,OAAA/C,SAAA;MAAA;IAAA,GAyCR;EACL;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}