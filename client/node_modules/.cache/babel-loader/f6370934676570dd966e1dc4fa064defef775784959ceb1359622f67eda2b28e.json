{"ast":null,"code":"import _defineProperty from \"/home/user/School/CSC330/ThinkLink/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _regeneratorRuntime from \"/home/user/School/CSC330/ThinkLink/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/user/School/CSC330/ThinkLink/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.json.stringify.js\";\n/*\nimport savebuttoncontainer from '../components/savebuttoncontainer'\nimport { ref, computed, watch } from 'vue';\nimport MarkdownIt from 'markdown-it';\nimport { jsPDF } from 'jspdf';\nimport axios from 'axios';\n*/\n//import 'quill/dist/quill.snow.css'; // for snow theme\nimport { quillEditor } from 'vue3-quill';\nimport savebuttoncontainer from '../components/savebuttoncontainer';\nimport { ref, computed, watch } from 'vue';\nimport { jsPDF } from 'jspdf';\nimport axios from 'axios';\nexport default _defineProperty(_defineProperty({\n  name: 'Drafts',\n  components: {\n    savebuttoncontainer: savebuttoncontainer,\n    quillEditor: quillEditor\n  },\n  props: {\n    project_id: {\n      type: String,\n      required: true\n    }\n  }\n}, \"props\", {\n  project_id: {\n    type: String,\n    required: true\n  }\n}), \"setup\", function setup(props) {\n  var draftName = ref('');\n  var markdown = ref('');\n  //const md = new MarkdownIt();\n  var project_id = ref(props.project_id);\n  watch(props, function (newProps) {\n    project_id.value = newProps.project_id;\n  });\n  /*\n  const compiledMarkdown = computed(() => {\n      return md.render(markdown.value);\n  });\n  \n  const save = async () => {\n      const doc = new jsPDF();\n      doc.text(markdown.value, 10, 10);\n      const pdf = doc.output('blob');\n       try {\n          const formData = new FormData();\n          formData.append('action', 'create_draft');\n          formData.append('file', pdf, `${draftName.value}.pdf`);\n          formData.append('file_data', JSON.stringify({\n              content: markdown.value,\n              filename: `${draftName.value}.pdf`\n          }));\n          console.log('formData:', formData);\n           const response = await axios.post(`${process.env.VUE_APP_FLASK_APP_URL}/project_workspace/${props.project_id}`, formData, {\n              headers: {\n                  'Content-Type': 'multipart/form-data'\n              }\n          });\n           if (response.status === 200) {\n              console.log('Draft saved successfully');\n          } else {\n              console.log('Failed to save draft');\n          }\n      } catch (error) {\n          console.error('An error occurred while saving the draft:', error);\n      }\n  };\n  */\n  var save = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var doc;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            doc = new jsPDF();\n            doc.html(markdown.value, {\n              callback: function () {\n                var _callback = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(doc) {\n                  var pdf, formData, response;\n                  return _regeneratorRuntime().wrap(function _callee$(_context) {\n                    while (1) switch (_context.prev = _context.next) {\n                      case 0:\n                        pdf = doc.output('blob');\n                        _context.prev = 1;\n                        formData = new FormData();\n                        formData.append('action', 'create_draft');\n                        formData.append('file', pdf, \"\".concat(draftName.value, \".pdf\"));\n                        formData.append('file_data', JSON.stringify({\n                          content: markdown.value,\n                          filename: \"\".concat(draftName.value, \".pdf\")\n                        }));\n                        _context.next = 8;\n                        return axios.post(\"\".concat(process.env.VUE_APP_FLASK_APP_URL, \"/project_workspace/\").concat(props.project_id), formData, {\n                          headers: {\n                            'Content-Type': 'multipart/form-data'\n                          }\n                        });\n                      case 8:\n                        response = _context.sent;\n                        if (response.status === 200) {\n                          console.log('Draft saved successfully');\n                        } else {\n                          console.log('Failed to save draft');\n                        }\n                        _context.next = 15;\n                        break;\n                      case 12:\n                        _context.prev = 12;\n                        _context.t0 = _context[\"catch\"](1);\n                        console.error(_context.t0);\n                      case 15:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }, _callee, null, [[1, 12]]);\n                }));\n                function callback(_x) {\n                  return _callback.apply(this, arguments);\n                }\n                return callback;\n              }(),\n              x: 10,\n              y: 10\n            });\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n    return function save() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return {\n    draftName: draftName,\n    markdown: markdown,\n    //compiledMarkdown,\n    save: save\n  };\n});","map":{"version":3,"names":["quillEditor","savebuttoncontainer","ref","computed","watch","jsPDF","axios","_defineProperty","name","components","props","project_id","type","String","required","setup","draftName","markdown","newProps","value","save","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","doc","wrap","_callee2$","_context2","prev","next","html","callback","_callback","_callee","pdf","formData","response","_callee$","_context","output","FormData","append","concat","JSON","stringify","content","filename","post","process","env","VUE_APP_FLASK_APP_URL","headers","sent","status","console","log","t0","error","stop","_x","apply","arguments","x","y"],"sources":["/home/user/School/CSC330/ThinkLink/client/src/components/drafts.vue"],"sourcesContent":["/<!--\n<template>\n    <input class=\"draft-name-input\" v-model=\"draftName\" placeholder=\"Enter draft name\" />\n    <div v-html=\"compiledMarkdown\" class=\"markdown-preview\"></div>\n    <textarea id=\"markdown-editor\" v-model=\"markdown\"></textarea>\n    <savebuttoncontainer class=\"save-button\" @click=\"save\"></savebuttoncontainer>\n</template>\n-->\n<template>\n    <input class=\"draft-name-input\" v-model=\"draftName\" placeholder=\"Enter draft name\" />\n    <!--<div v-html=\"compiledMarkdown\" class=\"markdown-preview\"></div>-->\n    <quill-editor id=\"markdown-editor\" v-model=\"markdown\"></quill-editor>\n    <savebuttoncontainer class=\"save-button\" @click=\"save\"></savebuttoncontainer>\n</template>\n\n<script>\n/*\nimport savebuttoncontainer from '../components/savebuttoncontainer'\nimport { ref, computed, watch } from 'vue';\nimport MarkdownIt from 'markdown-it';\nimport { jsPDF } from 'jspdf';\nimport axios from 'axios';\n*/\n//import 'quill/dist/quill.snow.css'; // for snow theme\nimport { quillEditor } from 'vue3-quill';\nimport savebuttoncontainer from '../components/savebuttoncontainer';\nimport { ref, computed, watch } from 'vue';\nimport { jsPDF } from 'jspdf';\nimport axios from 'axios';\n\nexport default {\n    name: 'Drafts',\n    components: {\n        savebuttoncontainer,\n        quillEditor\n    },\n    props: {\n        project_id: {\n            type: String,\n            required: true,\n        },\n    },\n\n    /*\n    export default {\n    name: 'Drafts',\n    components: {\n        savebuttoncontainer\n    },\n    */\n    props: {\n        project_id: {\n            type: String,\n            required: true,\n        },\n    },\n    setup(props) {\n        const draftName = ref('');\n        const markdown = ref('');\n        //const md = new MarkdownIt();\n        const project_id = ref(props.project_id);\n\n        watch(props, (newProps) => {\n            project_id.value = newProps.project_id;\n        });\n        /*\n        const compiledMarkdown = computed(() => {\n            return md.render(markdown.value);\n        });\n        \n        const save = async () => {\n            const doc = new jsPDF();\n            doc.text(markdown.value, 10, 10);\n            const pdf = doc.output('blob');\n\n            try {\n                const formData = new FormData();\n                formData.append('action', 'create_draft');\n                formData.append('file', pdf, `${draftName.value}.pdf`);\n                formData.append('file_data', JSON.stringify({\n                    content: markdown.value,\n                    filename: `${draftName.value}.pdf`\n                }));\n                console.log('formData:', formData);\n\n                const response = await axios.post(`${process.env.VUE_APP_FLASK_APP_URL}/project_workspace/${props.project_id}`, formData, {\n                    headers: {\n                        'Content-Type': 'multipart/form-data'\n                    }\n                });\n\n                if (response.status === 200) {\n                    console.log('Draft saved successfully');\n                } else {\n                    console.log('Failed to save draft');\n                }\n            } catch (error) {\n                console.error('An error occurred while saving the draft:', error);\n            }\n        };\n        */\n        const save = async () => {\n            const doc = new jsPDF();\n            doc.html(markdown.value, {\n                callback: async function (doc) {\n                    const pdf = doc.output('blob');\n\n                    try {\n                        const formData = new FormData();\n                        formData.append('action', 'create_draft');\n                        formData.append('file', pdf, `${draftName.value}.pdf`);\n                        formData.append('file_data', JSON.stringify({\n                            content: markdown.value,\n                            filename: `${draftName.value}.pdf`\n                        }));\n\n                        const response = await axios.post(`${process.env.VUE_APP_FLASK_APP_URL}/project_workspace/${props.project_id}`, formData, {\n                            headers: {\n                                'Content-Type': 'multipart/form-data'\n                            }\n                        });\n\n                        if (response.status === 200) {\n                            console.log('Draft saved successfully');\n                        } else {\n                            console.log('Failed to save draft');\n                        }\n                    } catch (error) {\n                        console.error(error);\n                    }\n                },\n                x: 10,\n                y: 10\n            });\n        };\n        return {\n            draftName,\n            markdown,\n            //compiledMarkdown,\n            save,\n    \n        };\n    },\n};\n</script>\n\n<style scoped>\n.projectworkspace-pagemain {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-items: center;\n  justify-content: center;\n  padding-top: 30px;\n  max-width: 100%;\n  height: 100%;\n  position: relative;\n  flex-grow: 1;\n}\n\n#markdown-editor {\n  display: flex;\n  width: 500px;\n  height: 450px;\n  border: 1px solid black;\n}\n\n.draft-name-input {\n  height: 55px;\n  padding: 10px;\n  font-size: 30px;\n  margin-bottom: 20px;\n  border: 2px solid black;\n  border-radius: 4px;\n  align-items: center;\n  justify-content: center;\n}\n\n.markdown-preview {\n  margin-top: 10px;\n  margin-bottom: 10px;\n  overflow-y: auto;\n  height: 200px;\n  width: 500px;\n  border: 1px solid black;\n}\n\n.save-button {\n  align-self: center;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}