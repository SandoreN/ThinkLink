{"ast":null,"code":"import _regeneratorRuntime from \"/home/user/School/CSC330/ThinkLink/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/user/School/CSC330/ThinkLink/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport loadbuttoncontainer from '../components/loadbuttoncontainer';\nimport savebuttoncontainer from '../components/savebuttoncontainer';\nimport { ref, computed, watch } from 'vue';\nimport MarkdownIt from 'markdown-it';\nimport { jsPDF } from 'jspdf';\nimport axios from 'axios';\nexport default {\n  name: 'Drafts',\n  components: {\n    savebuttoncontainer: savebuttoncontainer,\n    loadbuttoncontainer: loadbuttoncontainer\n  },\n  props: {\n    project_id: {\n      type: String,\n      required: true\n    }\n  },\n  setup: function setup(props) {\n    var draftName = ref('');\n    var markdown = ref('');\n    var md = new MarkdownIt();\n    var project_id = ref(props.project_id);\n    var drafts = ref([]);\n    watch(props, function (newProps) {\n      project_id.value = newProps.project_id;\n    });\n    var compiledMarkdown = computed(function () {\n      return md.render(markdown.value);\n    });\n    var load = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"\".concat(process.env.VUE_APP_FLASK_APP_URL, \"/project_workspace/\").concat(props.project_id));\n            case 3:\n              response = _context.sent;\n              console.log('Server response:', response.data);\n              if (response.status === 200) {\n                console.log('response.data.drafts:', response.data.drafts);\n                drafts.value = response.data.drafts;\n              } else {\n                console.log('Failed to load drafts');\n              }\n              _context.next = 11;\n              break;\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('An error occurred while loading drafts:', _context.t0);\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 8]]);\n      }));\n      return function load() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var loadDraft = function loadDraft(draft) {\n      markdown.value = draft.content;\n    };\n    var save = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var doc, pdf, options, formData, response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              doc = new jsPDF();\n              doc.html(markdown.value, options);\n              pdf = doc.output('blob');\n              options = {\n                x: 10,\n                y: 10,\n                callback: function callback() {\n                  // This will be called when the conversion is done\n                }\n              };\n              _context2.prev = 4;\n              formData = new FormData();\n              formData.append('action', 'create_draft');\n              formData.append('file', pdf, \"\".concat(draftName.value, \".pdf\"));\n              formData.append('file_data', JSON.stringify({\n                content: markdown.value,\n                filename: \"\".concat(draftName.value, \".pdf\")\n              }));\n              console.log('formData:', formData);\n              _context2.next = 12;\n              return axios.post(\"\".concat(process.env.VUE_APP_FLASK_APP_URL, \"/project_workspace/\").concat(props.project_id), formData, {\n                headers: {\n                  'Content-Type': 'multipart/form-data'\n                }\n              });\n            case 12:\n              response = _context2.sent;\n              if (response.status === 200) {\n                console.log('Draft saved successfully');\n              } else {\n                console.log('Failed to save draft');\n              }\n              _context2.next = 19;\n              break;\n            case 16:\n              _context2.prev = 16;\n              _context2.t0 = _context2[\"catch\"](4);\n              console.error('An error occurred while saving the draft:', _context2.t0);\n            case 19:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[4, 16]]);\n      }));\n      return function save() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    return {\n      draftName: draftName,\n      markdown: markdown,\n      compiledMarkdown: compiledMarkdown,\n      save: save,\n      drafts: drafts,\n      load: load,\n      loadDraft: loadDraft\n    };\n  }\n};","map":{"version":3,"names":["loadbuttoncontainer","savebuttoncontainer","ref","computed","watch","MarkdownIt","jsPDF","axios","name","components","props","project_id","type","String","required","setup","draftName","markdown","md","drafts","newProps","value","compiledMarkdown","render","load","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","process","env","VUE_APP_FLASK_APP_URL","sent","console","log","data","status","t0","error","stop","apply","arguments","loadDraft","draft","content","save","_ref2","_callee2","doc","pdf","options","formData","_callee2$","_context2","html","output","x","y","callback","FormData","append","JSON","stringify","filename","post","headers"],"sources":["/home/user/School/CSC330/ThinkLink/client/src/components/drafts.vue"],"sourcesContent":["<template>\n    <input class=\"draft-name-input\" v-model=\"draftName\" placeholder=\"Enter draft name\" />\n    <div v-html=\"compiledMarkdown\" class=\"markdown-preview\"></div>\n    <textarea id=\"markdown-editor\" v-model=\"markdown\"></textarea>\n    <!--\n    <loadbuttoncontainer class=\"load-button\" @click=\"load\"></loadbuttoncontainer>\n    <ul>\n        <li v-for=\"draft in drafts\" :key=\"draft.id\">\n            {{ draft.name }}\n        </li>\n    </ul>\n    -->\n    <savebuttoncontainer class=\"save-button\" @click=\"save\"></savebuttoncontainer>\n\n</template>\n  \n<script>\nimport loadbuttoncontainer from '../components/loadbuttoncontainer'\nimport savebuttoncontainer from '../components/savebuttoncontainer'\nimport { ref, computed, watch } from 'vue';\nimport MarkdownIt from 'markdown-it';\nimport { jsPDF } from 'jspdf';\nimport axios from 'axios';\n\nexport default {\n    name: 'Drafts',\n    components: {\n        savebuttoncontainer,\n        loadbuttoncontainer\n    },\n    props: {\n        project_id: {\n            type: String,\n            required: true,\n        },\n    },\n    setup(props) {\n        const draftName = ref('');\n        const markdown = ref('');\n        const md = new MarkdownIt();\n        const project_id = ref(props.project_id);\n        const drafts = ref([]);\n\n        watch(props, (newProps) => {\n            project_id.value = newProps.project_id;\n        });\n\n        const compiledMarkdown = computed(() => {\n            return md.render(markdown.value);\n        });\n        \n        const load = async () => {\n            try {\n                const response = await axios.get(`${process.env.VUE_APP_FLASK_APP_URL}/project_workspace/${props.project_id}`)\n                console.log('Server response:', response.data);\n                if (response.status === 200) {\n                    console.log('response.data.drafts:', response.data.drafts); \n                    drafts.value = response.data.drafts;\n                } else {\n                    console.log('Failed to load drafts');\n                }\n            } catch (error) {\n                console.error('An error occurred while loading drafts:', error);\n            }\n        };\n\n        const loadDraft = (draft) => {\n            markdown.value = draft.content;\n        }\n\n        const save = async () => {\n            const doc = new jsPDF();\n            doc.html(markdown.value, options);\n            const pdf = doc.output('blob');\n            const options = {\n                x: 10,\n                y: 10,\n                callback: function () {\n                    // This will be called when the conversion is done\n                }\n            };\n\n\n            try {\n                const formData = new FormData();\n                formData.append('action', 'create_draft');\n                formData.append('file', pdf, `${draftName.value}.pdf`);\n                formData.append('file_data', JSON.stringify({\n                    content: markdown.value,\n                    filename: `${draftName.value}.pdf`\n                }));\n                console.log('formData:', formData);\n\n                const response = await axios.post(`${process.env.VUE_APP_FLASK_APP_URL}/project_workspace/${props.project_id}`, formData, {\n                    headers: {\n                        'Content-Type': 'multipart/form-data'\n                    }\n                });\n\n                if (response.status === 200) {\n                    console.log('Draft saved successfully');\n                } else {\n                    console.log('Failed to save draft');\n                }\n            } catch (error) {\n                console.error('An error occurred while saving the draft:', error);\n            }\n        };\n        \n        return {\n            draftName,\n            markdown,\n            compiledMarkdown,\n            save,\n            drafts,\n            load,\n            loadDraft\n        };\n    },\n};\n</script>\n\n<style scoped>\n.projectworkspace-pagemain {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-items: center;\n  justify-content: center;\n  padding-top: 30px;\n  max-width: 100%;\n  height: 100%;\n  position: relative;\n  flex-grow: 1;\n}\n\n#markdown-editor {\n  display: flex;\n  width: 500px;\n  height: 450px;\n  border: 1px solid black;\n}\n\n.draft-name-input {\n  height: 55px;\n  padding: 10px;\n  font-size: 30px;\n  margin-bottom: 20px;\n  border: 2px solid black;\n  border-radius: 4px;\n  align-items: center;\n  justify-content: center;\n}\n\n.markdown-preview {\n  margin-top: 10px;\n  margin-bottom: 10px;\n  overflow-y: auto;\n  height: 200px;\n  width: 500px;\n  border: 1px solid black;\n}\n\n.save-button {\n  align-self: center;\n}\n\n.load-button {\n  align-self: center;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}