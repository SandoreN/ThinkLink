{"ast":null,"code":"import _regeneratorRuntime from \"/home/user/School/CSC330/ThinkLink/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/user/School/CSC330/ThinkLink/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport { ref } from 'vue';\nimport { quillEditor } from 'vue3-quill';\nimport savebuttoncontainer from '../components/savebuttoncontainer';\nimport { jsPDF } from 'jspdf';\nimport axios from 'axios';\nexport default {\n  name: 'Drafts',\n  components: {\n    savebuttoncontainer: savebuttoncontainer,\n    quillEditor: quillEditor\n  },\n  props: {\n    project_id: {\n      type: String,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      draftName: '',\n      quill: null,\n      project_id: this.project_id,\n      editorContent: ''\n    };\n  },\n  methods: {\n    onEditorReady: function onEditorReady(editor) {\n      this.quill = editor;\n    },\n    save: function save() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var content, doc, pdf, formData, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!_this.quill) {\n                _context.next = 20;\n                break;\n              }\n              content = JSON.stringify(_this.quill.getContents());\n              doc = new jsPDF();\n              doc.text(content, 10, 10);\n              pdf = doc.output('blob');\n              _context.prev = 5;\n              formData = new FormData();\n              formData.append('action', 'create_draft');\n              formData.append('file', pdf, \"\".concat(_this.draftName, \".pdf\"));\n              formData.append('file_data', JSON.stringify({\n                content: content,\n                filename: \"\".concat(_this.draftName, \".pdf\")\n              }));\n              console.log('formData:', formData);\n              _context.next = 13;\n              return axios.post(\"\".concat(process.env.VUE_APP_FLASK_APP_URL, \"/project_workspace/\").concat(_this.project_id), formData, {\n                headers: {\n                  'Content-Type': 'multipart/form-data'\n                }\n              });\n            case 13:\n              response = _context.sent;\n              if (response.status === 200) {\n                console.log('Draft saved successfully');\n              } else {\n                console.log('Failed to save draft');\n              }\n              _context.next = 20;\n              break;\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](5);\n              console.error('An error occurred while saving the draft:', _context.t0);\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[5, 17]]);\n      }))();\n    },\n    updateMarkdown: function updateMarkdown(content) {\n      this.editorContent = content.html;\n    }\n  }\n};","map":{"version":3,"names":["ref","quillEditor","savebuttoncontainer","jsPDF","axios","name","components","props","project_id","type","String","required","data","draftName","quill","editorContent","methods","onEditorReady","editor","save","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","content","doc","pdf","formData","response","wrap","_callee$","_context","prev","next","JSON","stringify","getContents","text","output","FormData","append","concat","filename","console","log","post","process","env","VUE_APP_FLASK_APP_URL","headers","sent","status","t0","error","stop","updateMarkdown","html"],"sources":["/home/user/School/CSC330/ThinkLink/client/src/components/drafts.vue"],"sourcesContent":["/<!--\n<template>\n    <input class=\"draft-name-input\" v-model=\"draftName\" placeholder=\"Enter draft name\" />\n    <div v-html=\"compiledMarkdown\" class=\"markdown-preview\"></div>\n    <textarea id=\"markdown-editor\" v-model=\"markdown\"></textarea>\n    <savebuttoncontainer class=\"save-button\" @click=\"save\"></savebuttoncontainer>\n</template>\n-->\n<template>\n    <input class=\"draft-name-input\" v-model=\"draftName\" placeholder=\"Enter draft name\" />\n    <!--<div v-html=\"compiledMarkdown \" class=\"markdown-preview\"></div>-->\n    <quill-editor @ready=\"onEditorReady\" ref=\"quill\" id=\"quill-editor\" editorContent=\"quill\" @contentChange=\"updateMarkdown\"></quill-editor>\n    <savebuttoncontainer class=\"save-button\" @click=\"save\"></savebuttoncontainer>\n</template>\n  \n<script>\nimport { ref } from 'vue';\nimport { quillEditor } from 'vue3-quill';\nimport savebuttoncontainer from '../components/savebuttoncontainer';\nimport { jsPDF } from 'jspdf';\nimport axios from 'axios';\n\nexport default {\n    name: 'Drafts',\n    components: {\n        savebuttoncontainer,\n        quillEditor\n    },\n    props: {\n        project_id: {\n        type: String,\n        required: true,\n        },\n    },\n    data() {\n        return {\n            draftName: '',\n            quill: null,\n            project_id: this.project_id,\n            editorContent: ''\n        };\n    },\n    methods: {\n        onEditorReady(editor) {\n            this.quill = editor;\n        },\n        async save() {\n            if (this.quill) {\n                let content = JSON.stringify(this.quill.getContents());\n\n                const doc = new jsPDF();\n                doc.text(content, 10, 10);\n                const pdf = doc.output('blob');\n\n                try {\n                    const formData = new FormData();\n                    formData.append('action', 'create_draft');\n                    formData.append('file', pdf, `${this.draftName}.pdf`);\n                    formData.append('file_data', JSON.stringify({\n                        content: content,\n                        filename: `${this.draftName}.pdf`\n                    }));\n                    console.log('formData:', formData);\n\n                    const response = await axios.post(`${process.env.VUE_APP_FLASK_APP_URL}/project_workspace/${this.project_id}`, formData, {\n                        headers: {\n                            'Content-Type': 'multipart/form-data'\n                        }\n                    });\n\n                    if (response.status === 200) {\n                        console.log('Draft saved successfully');\n                    } else {\n                        console.log('Failed to save draft');\n                    }\n                } catch (error) {\n                    console.error('An error occurred while saving the draft:', error);\n                }\n            }\n        },\n        updateMarkdown(content) {\n            this.editorContent = content.html;\n        }\n    }\n};\n</script>\n\n<style scoped>\n.projectworkspace-pagemain {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-items: center;\n  justify-content: center;\n  padding-top: 30px;\n  max-width: 100%;\n  height: 100%;\n  position: relative;\n  flex-grow: 1;\n}\n\n#quill-editor {\n  display: flex;\n  width: 500px;\n  height: 450px;\n  border: 1px solid black;\n}\n\n.draft-name-input {\n  height: 55px;\n  padding: 10px;\n  font-size: 30px;\n  margin-bottom: 20px;\n  border: 2px solid black;\n  border-radius: 4px;\n  align-items: center;\n  justify-content: center;\n}\n/*\n.markdown-preview {\n  margin-top: 10px;\n  margin-bottom: 10px;\n  overflow-y: auto;\n  height: 200px;\n  width: 500px;\n  border: 1px solid black;\n}\n*/\n.save-button {\n  align-self: center;\n}\n</style>\n<!--\n/*\nconst compiledMarkdown = computed(() => {\n    return md.render(markdown.value);\n});\n\nconst save = async () => {\n    const doc = new jsPDF();\n    doc.text(markdown.value, 10, 10);\n    const pdf = doc.output('blob');\n\n    try {\n        const formData = new FormData();\n        formData.append('action', 'create_draft');\n        formData.append('file', pdf, `${draftName.value}.pdf`);\n        formData.append('file_data', JSON.stringify({\n            content: markdown.value,\n            filename: `${draftName.value}.pdf`\n        }));\n        console.log('formData:', formData);\n\n        const response = await axios.post(`${process.env.VUE_APP_FLASK_APP_URL}/project_workspace/${props.project_id}`, formData, {\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        });\n\n        if (response.status === 200) {\n            console.log('Draft saved successfully');\n        } else {\n            console.log('Failed to save draft');\n        }\n    } catch (error) {\n        console.error('An error occurred while saving the draft:', error);\n    }\n};\n-->"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}